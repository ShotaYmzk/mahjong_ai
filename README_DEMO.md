# 10,000ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¢å®Ÿè¡Œæ–¹æ³•

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€10,000ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§éº»é›€AIã®æ•™å¸«ã‚ã‚Šå­¦ç¿’ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸš€ æœ€é€Ÿã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ2ã‚³ãƒãƒ³ãƒ‰ï¼‰

```bash
# 1. ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆ5åˆ†ï¼‰
bash scripts/quick_test.sh

# 2. æœ¬ç•ªãƒ‡ãƒ¢ã‚’å®Ÿè¡Œï¼ˆ2-3æ™‚é–“ï¼‰
bash scripts/run_demo_all.sh
```

ãã‚Œã ã‘ã§ã™ï¼âœ¨

---

## ğŸ“‹ å®Ÿè¡Œæ‰‹é †ã®è©³ç´°

### æ–¹æ³•1: å…¨è‡ªå‹•å®Ÿè¡Œï¼ˆæ¨å¥¨ï¼‰

```bash
bash scripts/run_demo_all.sh
```

ä»¥ä¸‹ãŒè‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
1. XMLãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª
2. ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰ï¼ˆ10,000ã‚²ãƒ¼ãƒ  â†’ å›ºå®šé•·ãƒ™ã‚¯ãƒˆãƒ«ï¼‰
3. ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ï¼ˆTransformerã€50ã‚¨ãƒãƒƒã‚¯ï¼‰

**æ‰€è¦æ™‚é–“:** ç´„2-3æ™‚é–“  
**å¿…è¦ãªã‚‚ã®:** XMLãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10,000ã‚²ãƒ¼ãƒ ï¼‰

### æ–¹æ³•2: ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«å®Ÿè¡Œ

#### ã‚¹ãƒ†ãƒƒãƒ—1: XMLãƒ‡ãƒ¼ã‚¿ã‚’æº–å‚™

```bash
# ã‚ªãƒ—ã‚·ãƒ§ãƒ³A: ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆ
mkdir -p data/xml_logs
cp 2009080100gm-00e1-0000-63d644dd.xml data/xml_logs/

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³B: å®Ÿãƒ‡ãƒ¼ã‚¿ã‚’åé›†ï¼ˆå¤©é³³ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ãŒå¿…è¦ï¼‰
python scripts/collect_tenhou_data.py --max-files 10000
```

#### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’æ§‹ç¯‰

```bash
python scripts/build_comprehensive_dataset.py \
    --xml-dir data/xml_logs \
    --output-dir data/processed_demo \
    --max-games 10000
```

å‡ºåŠ›: `data/processed_demo/` ã«å›ºå®šé•·ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆ2,099æ¬¡å…ƒï¼‰

#### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¢ãƒ‡ãƒ«ã‚’å­¦ç¿’

```bash
python scripts/train_demo.py \
    --data-dir data/processed_demo \
    --output-dir outputs/demo \
    --epochs 50
```

å‡ºåŠ›: `outputs/demo/` ã«å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«

---

## ğŸ“Š å®Ÿè¡Œä¾‹ã¨ã‚³ãƒãƒ³ãƒ‰ä¸€è¦§

### ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ5åˆ†ï¼‰

```bash
bash scripts/quick_test.sh
```

ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§å…¨ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ãƒ†ã‚¹ãƒˆã€‚

### æ¨™æº–ãƒ‡ãƒ¢ï¼ˆ2-3æ™‚é–“ï¼‰

```bash
bash scripts/run_demo_all.sh
```

10,000ã‚²ãƒ¼ãƒ ã§æœ¬æ ¼çš„ãªãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã€‚

### ã‚«ã‚¹ã‚¿ãƒ è¨­å®š

```bash
# è»½é‡è¨­å®šï¼ˆãƒ¡ãƒ¢ãƒªç¯€ç´„ï¼‰
python scripts/build_comprehensive_dataset.py \
    --draw-history 4 \
    --discard-history 16 \
    --max-games 5000

python scripts/train_demo.py \
    --batch-size 128 \
    --d-model 128 \
    --num-layers 4
```

### å¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿

```bash
# 50,000ã‚²ãƒ¼ãƒ 
python scripts/build_comprehensive_dataset.py --max-games 50000
python scripts/train_demo.py --epochs 100
```

---

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹çµæœ

### ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆï¼ˆ10,000ã‚²ãƒ¼ãƒ ï¼‰

```
ç·ã‚µãƒ³ãƒ—ãƒ«æ•°: ç´„500,000-600,000
è¨“ç·´ãƒ‡ãƒ¼ã‚¿: ç´„400,000-500,000 (80%)
æ¤œè¨¼ãƒ‡ãƒ¼ã‚¿: ç´„50,000-60,000 (10%)
ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: ç´„50,000-60,000 (10%)
ç‰¹å¾´é‡æ¬¡å…ƒ: 2,099
```

### å­¦ç¿’çµæœï¼ˆ50ã‚¨ãƒãƒƒã‚¯ï¼‰

```
è¨“ç·´ç²¾åº¦: 35-45%
æ¤œè¨¼ç²¾åº¦: 33-42%
Top-3ç²¾åº¦: 60-70%
Top-5ç²¾åº¦: 70-80%
```

**æ³¨:** éº»é›€ã¯é«˜åº¦ãªæˆ¦ç•¥ã‚²ãƒ¼ãƒ ã§ã€ä¸Šç´šè€…ã§ã‚‚ä¸€è‡´ç‡ã¯40-50%ç¨‹åº¦ã§ã™ã€‚

---

## ğŸ”§ å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

### ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ

```
data/processed_demo/
â”œâ”€â”€ train/
â”‚   â”œâ”€â”€ X_train.npy          # [N, 2099] float32
â”‚   â”œâ”€â”€ y_train.npy          # [N] int64 (0-33)
â”‚   â””â”€â”€ metadata_train.json
â”œâ”€â”€ val/
â”œâ”€â”€ test/
â””â”€â”€ dataset_info.json        # çµ±è¨ˆæƒ…å ±
```

### ãƒ¢ãƒ‡ãƒ«

```
outputs/demo/
â”œâ”€â”€ checkpoints/
â”‚   â”œâ”€â”€ best_model.pt        # æœ€è‰¯ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ checkpoint_epoch_10.pt
â”‚   â””â”€â”€ ...
â”œâ”€â”€ train.log                # å­¦ç¿’ãƒ­ã‚°
â””â”€â”€ metrics/
    â”œâ”€â”€ test_metrics.json    # ãƒ†ã‚¹ãƒˆçµæœ
    â””â”€â”€ ...
```

---

## ğŸ’¡ ã‚ˆãã‚ã‚‹è³ªå•

### Q: XMLãƒ‡ãƒ¼ã‚¿ã¯ã©ã“ã§å…¥æ‰‹ï¼Ÿ

**A:** ä»¥ä¸‹ã®æ–¹æ³•ãŒã‚ã‚Šã¾ã™ï¼š

1. **å¤©é³³ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰:**
   ```bash
   # å¤©é³³ã®å…¬å¼ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
   wget http://tenhou.net/sc/raw/2024.tar.bz2
   tar -xjf 2024.tar.bz2
   ```

2. **ãƒ‡ãƒ¼ã‚¿åé›†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨:**
   ```bash
   python scripts/collect_tenhou_data.py \
       --html-dir /path/to/tenhou_dataset \
       --max-files 10000
   ```

3. **ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã§ãƒ†ã‚¹ãƒˆ:**
   ```bash
   mkdir -p data/xml_logs
   cp 2009080100gm-00e1-0000-63d644dd.xml data/xml_logs/
   bash scripts/quick_test.sh
   ```

### Q: å‡¦ç†æ™‚é–“ã¯ã©ã®ãã‚‰ã„ï¼Ÿ

**A:** 8ã‚³ã‚¢CPUã€32GB RAMã®ç’°å¢ƒã§ã®ç›®å®‰ï¼š

| ã‚¹ãƒ†ãƒƒãƒ— | å‡¦ç†æ™‚é–“ |
|---------|---------|
| ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰ï¼ˆ10,000ã‚²ãƒ¼ãƒ ï¼‰ | 1-2æ™‚é–“ |
| ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ï¼ˆ50ã‚¨ãƒãƒƒã‚¯ã€GPUï¼‰ | 30åˆ†-1æ™‚é–“ |
| ãƒ¢ãƒ‡ãƒ«å­¦ç¿’ï¼ˆ50ã‚¨ãƒãƒƒã‚¯ã€CPUï¼‰ | 5-10æ™‚é–“ |

### Q: ãƒ¡ãƒ¢ãƒªä¸è¶³ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹

**A:** ä»¥ä¸‹ã‚’è©¦ã—ã¦ãã ã•ã„ï¼š

```bash
# è»½é‡è¨­å®š
python scripts/build_comprehensive_dataset.py \
    --draw-history 4 \
    --discard-history 16 \
    --max-games 5000

python scripts/train_demo.py \
    --batch-size 64
```

### Q: GPUã¯å¿…é ˆï¼Ÿ

**A:** å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€GPUãŒã‚ã‚‹ã¨å­¦ç¿’ãŒ10-20å€é«˜é€Ÿã«ãªã‚Šã¾ã™ã€‚

CPUã§å®Ÿè¡Œã™ã‚‹å ´åˆï¼š
```bash
python scripts/train_demo.py --device cpu --epochs 20
```

---

## ğŸ¯ æ¨å¥¨å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### åˆã‚ã¦ã®æ–¹

1. **ã‚¯ã‚¤ãƒƒã‚¯ãƒ†ã‚¹ãƒˆï¼ˆ5åˆ†ï¼‰**
   ```bash
   bash scripts/quick_test.sh
   ```
   â†’ ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèª

2. **å°è¦æ¨¡ãƒ‡ãƒ¢ï¼ˆ30åˆ†ï¼‰**
   ```bash
   # 100ã‚²ãƒ¼ãƒ ã§å®Ÿè¡Œ
   python scripts/build_comprehensive_dataset.py --max-games 100
   python scripts/train_demo.py --epochs 10
   ```
   â†’ ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ§‹ç¯‰ã¨å­¦ç¿’ã®æµã‚Œã‚’ç†è§£

3. **æœ¬ç•ªãƒ‡ãƒ¢ï¼ˆ2-3æ™‚é–“ï¼‰**
   ```bash
   bash scripts/run_demo_all.sh
   ```
   â†’ 10,000ã‚²ãƒ¼ãƒ ã§æœ¬æ ¼çš„ãªãƒ‡ãƒ¢

### çµŒé¨“è€…ã®æ–¹

ç›´æ¥æœ¬ç•ªãƒ‡ãƒ¢ã‚’å®Ÿè¡Œï¼š
```bash
bash scripts/run_demo_all.sh
```

---

## ğŸ“š è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | èª¬æ˜ |
|-------------|------|
| [QUICKSTART.md](QUICKSTART.md) | ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ |
| [DEMO_GUIDE.md](DEMO_GUIDE.md) | è©³ç´°ãªãƒ‡ãƒ¢å®Ÿè¡Œã‚¬ã‚¤ãƒ‰ |
| [docs/USAGE_GUIDE.md](docs/USAGE_GUIDE.md) | å®Œå…¨ãªä½¿ç”¨æ–¹æ³• |
| [docs/DATA_CONVERSION_PIPELINE.md](docs/DATA_CONVERSION_PIPELINE.md) | è¨­è¨ˆæ›¸ |

---

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ

1. **ãƒ­ã‚°ã‚’ç¢ºèª:**
   ```bash
   cat dataset_building.log
   cat outputs/demo/train.log
   ```

2. **ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ:**
   ```bash
   python scripts/test_data_pipeline.py
   ```

3. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèª:**
   ```bash
   python --version
   pip list | grep torch
   ```

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼

| ã‚¨ãƒ©ãƒ¼ | è§£æ±ºæ–¹æ³• |
|-------|---------|
| XMLãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ | `mkdir -p data/xml_logs`<br>`cp 2009*.xml data/xml_logs/` |
| ãƒ¡ãƒ¢ãƒªä¸è¶³ | `--draw-history 4 --discard-history 16` |
| CUDA out of memory | `--batch-size 64` ã¾ãŸã¯ `--device cpu` |

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å®Ÿè¡Œå‰ã«ç¢ºèªï¼š

- [ ] Python 3.8ä»¥ä¸ŠãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹
- [ ] å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ï¼ˆ`pip install -r requirements.txt`ï¼‰
- [ ] XMLãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ï¼ˆã¾ãŸã¯`quick_test.sh`ã§ãƒ†ã‚¹ãƒˆï¼‰
- [ ] ååˆ†ãªãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ãŒã‚ã‚‹ï¼ˆç´„10GBä»¥ä¸Šï¼‰
- [ ] ååˆ†ãªãƒ¡ãƒ¢ãƒªãŒã‚ã‚‹ï¼ˆ8GBä»¥ä¸Šæ¨å¥¨ï¼‰

---

## ğŸ‰ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ‡ãƒ¢ãŒæˆåŠŸã—ãŸã‚‰ï¼š

1. **ã‚ˆã‚Šå¤§è¦æ¨¡ãªãƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’**
   ```bash
   # 50,000ã‚²ãƒ¼ãƒ 
   python scripts/build_comprehensive_dataset.py --max-games 50000
   python scripts/train_demo.py --epochs 100
   ```

2. **ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´**
   ```bash
   python scripts/train_demo.py \
       --learning-rate 5e-4 \
       --d-model 512 \
       --num-layers 8
   ```

3. **è©•ä¾¡ã¨åˆ†æ**
   ```bash
   # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®è©³ç´°è©•ä¾¡
   python scripts/evaluate_model.py \
       --model outputs/demo/checkpoints/best_model.pt
   ```

---

**Happy Training! ğŸš€ğŸ€„**

è³ªå•ã‚„å•é¡ŒãŒã‚ã‚‹å ´åˆã¯ã€[DEMO_GUIDE.md](DEMO_GUIDE.md)ã®ã€Œãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

